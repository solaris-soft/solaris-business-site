---
import Layout from "@/layouts/Layout.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");

// Categorize projects
const categorizedProjects = {
  websites: projects.filter(
    (p) =>
      p.data.title.includes("Company Site") || p.data.title.includes("Website"),
  ),
  applications: projects.filter(
    (p) => p.data.title.includes("Webapp") || p.data.title.includes("AI"),
  ),
  configurations: projects.filter(
    (p) =>
      p.data.title.includes("Configuration") || p.data.title.includes("Fortix"),
  ),
};
---

<Layout
  title="Projects | Solaris Software"
  description="Discover SOLARIS SOFTWARE's portfolio of innovative web development projects including custom business websites, web applications, and AI solutions for Perth and Western Australian businesses."
  keywords="web development portfolio, Perth software projects, custom websites, business applications, AI solutions, Western Australia web development"
  category="Portfolio"
>
  <main class="min-h-screen bg-white">
    <!-- Header Section -->
    <section class="py-32 bg-white relative overflow-hidden">
      <!-- Subtle background accent -->
      <div
        class="absolute inset-0 bg-gradient-to-br from-orange-50/30 via-transparent to-orange-50/20"
      >
      </div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="text-center">
          <h1
            class="text-4xl md:text-5xl lg:text-6xl font-display text-gray-900 mb-6"
          >
            Our Projects
          </h1>
          <p
            class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed"
          >
            A showcase of our innovative solutions, from custom websites to AI
            applications, designed to help businesses thrive in the digital
            landscape.
          </p>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="py-16 md:py-24 bg-gray-50/50 relative">
      <!-- Subtle pattern overlay -->
      <div class="absolute inset-0 opacity-[0.02]">
        <div
          class="absolute inset-0"
          style="background-image: radial-gradient(circle at 1px 1px, #ff3d00 1px, transparent 0); background-size: 20px 20px;"
        >
        </div>
      </div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <!-- Category Filter -->
        <div class="flex flex-wrap justify-center gap-3 mb-12">
          <button
            class="category-filter active px-6 py-3 rounded-full bg-orange-500 text-white font-medium transition-all duration-300 shadow-sm hover:shadow-md"
            data-category="all"
          >
            All Projects
          </button>
          <button
            class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium hover:bg-orange-50 hover:text-orange-600 transition-all duration-300 shadow-sm hover:shadow-md border border-gray-200"
            data-category="websites"
          >
            Websites
          </button>
          <button
            class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium hover:bg-orange-50 hover:text-orange-600 transition-all duration-300 shadow-sm hover:shadow-md border border-gray-200"
            data-category="applications"
          >
            Applications
          </button>
          <button
            class="category-filter px-6 py-3 rounded-full bg-white text-gray-700 font-medium hover:bg-orange-50 hover:text-orange-600 transition-all duration-300 shadow-sm hover:shadow-md border border-gray-200"
            data-category="configurations"
          >
            Configurations
          </button>
        </div>

        <!-- Projects Grid -->
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
          id="projects-grid"
        >
          {
            projects.map((project, index) => {
              // Determine category for each project
              let category = "websites";
              if (
                project.data.title.includes("Webapp") ||
                project.data.title.includes("AI")
              ) {
                category = "applications";
              } else if (
                project.data.title.includes("Configuration") ||
                project.data.title.includes("Fortix")
              ) {
                category = "configurations";
              }

              return (
                <a
                  href={project.data.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="group project-card bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-xl hover:shadow-orange-500/10 transition-all duration-300 hover:-translate-y-2"
                  data-category={category}
                >
                  {project.data.image && (
                    <div class="aspect-[16/10] overflow-hidden bg-gray-50">
                      <img
                        src={project.data.image.src}
                        alt={project.data.title}
                        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                        loading="lazy"
                      />
                    </div>
                  )}

                  <div class="p-6">
                    <div class="flex items-center gap-2 mb-3">
                      <span class="text-xs font-medium px-2 py-1 rounded-full bg-orange-100 text-orange-700">
                        {category === "websites"
                          ? "Website"
                          : category === "applications"
                            ? "Application"
                            : "Configuration"}
                      </span>
                    </div>

                    <h3 class="text-xl font-display text-gray-900 mb-3 group-hover:text-orange-600 transition-colors duration-300">
                      {project.data.title}
                    </h3>

                    <p class="text-gray-600 text-sm leading-relaxed mb-4 line-clamp-3">
                      {project.data.description}
                    </p>

                    <div class="flex items-center text-orange-600 font-medium text-sm">
                      <span>View Project</span>
                      <svg
                        class="w-4 h-4 ml-2 transition-transform duration-300 group-hover:translate-x-1"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                    </div>
                  </div>
                </a>
              );
            })
          }
        </div>
      </div>
    </section>

    <!-- Call to Action Section -->
    <section class="py-16 md:py-24 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl md:text-4xl font-display text-gray-900 mb-6">
          Ready to Start Your Project?
        </h2>
        <p class="text-lg text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed">
          Let's discuss how we can bring your vision to life with our expertise
          in web development, AI solutions, and business automation.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/contact/"
            class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-medium rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 hover:shadow-lg hover:shadow-orange-500/25"
          >
            Get Started
            <svg
              class="w-5 h-5 ml-2"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
          <a
            href="/services/"
            class="inline-flex items-center justify-center px-8 py-4 border-2 border-gray-300 text-gray-700 font-medium rounded-xl hover:border-orange-500 hover:text-orange-600 transition-all duration-300"
          >
            View Services
          </a>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  /* Category filter styles */
  .category-filter.active {
    background: linear-gradient(135deg, #ff3d00, #ff8a00);
    color: white;
  }

  /* Project card animations */
  .project-card {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease-out forwards;
  }

  .project-card:nth-child(1) {
    animation-delay: 0.1s;
  }
  .project-card:nth-child(2) {
    animation-delay: 0.2s;
  }
  .project-card:nth-child(3) {
    animation-delay: 0.3s;
  }
  .project-card:nth-child(4) {
    animation-delay: 0.4s;
  }
  .project-card:nth-child(5) {
    animation-delay: 0.5s;
  }
  .project-card:nth-child(6) {
    animation-delay: 0.6s;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Line clamp utility */
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Smooth transitions */
  .transition-all {
    transition-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Filter animations */
  .project-card.hidden {
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
  }

  .project-card.visible {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
  }
</style>

<script>
  // Category filtering functionality
  document.addEventListener("DOMContentLoaded", function () {
    const filterButtons = document.querySelectorAll(".category-filter");
    const projectCards = document.querySelectorAll(".project-card");

    filterButtons.forEach((button) => {
      button.addEventListener("click", function (this: HTMLButtonElement) {
        const category = this.getAttribute("data-category");

        // Update active button
        filterButtons.forEach((btn) => {
          btn.classList.remove("active");
          btn.classList.add(
            "bg-white",
            "text-gray-700",
            "border",
            "border-gray-200",
          );
          btn.classList.remove(
            "bg-orange-500",
            "text-white",
            "border-orange-500",
          );
        });

        this.classList.add("active");
        this.classList.remove(
          "bg-white",
          "text-gray-700",
          "border",
          "border-gray-200",
        );
        this.classList.add("bg-orange-500", "text-white");

        // Filter projects
        projectCards.forEach((card) => {
          const cardCategory = card.getAttribute("data-category");

          if (category === "all" || cardCategory === category) {
            card.classList.remove("hidden");
            card.classList.add("visible");
          } else {
            card.classList.add("hidden");
            card.classList.remove("visible");
          }
        });
      });
    });
  });
</script>
m
